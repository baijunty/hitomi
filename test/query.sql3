
SELECT * FROM Gallery g,json_each(g.artist) ja  where (json_valid(g.artist)=1 and ja.value = 'doumou') 
SELECT count(1) from Tasks WHERE completed=1
SELECT * FROM Tags WHERE translate like '%;%' limit 20
select * from Gallery g  limit 20
select * from UserLog
drop table if exists UserLog
select gft.gid,gft.hash,gft.name,gft.width,gft.height,gft.fileHash,gft.thumb from GalleryFileTemp gft LIMIT 20
select count(1) from GalleryFile LIMIT 20 where gid=1435461 order by name
select COUNT(*) OVER() AS total_count,g.* from Gallery g  where title like '%青春%' and title not like '%男優%' LIMIT 10
select distinct(ja.value) from Gallery g,json_each(g.artist) ja where json_valid(g.artist)=1 group by ja.value  limit 20
select * from GalleryFile where gid=1271545   order by name
select count(1) from GalleryFile
select gf.gid,gf.fileHash,gf.name,g.path,g.length from Gallery g,json_each(g.artist) ja left join GalleryFile gf on g.id=gf.gid 
where (json_valid(g.artist)=1 and ja.value = 'yahiro pochi' ) order by gf.gid,gf.name

SELECT gf.gid  from (SELECT DISTINCT(gid) from GalleryFile)  gf WHERE  not EXISTS (SELECT 1 from Gallery g WHERE g.id=gf.gid)
select g.id from  Gallery g,json_each(g.artist) ja left join GalleryFile gf on g.id=gf.gid where json_valid(g.artist)=1 and ja.value = 'fuuga' and gf.gid is null
select gf.thumb,gf.name,gf.gid from GalleryFile gf where gid=508271 and hash='0f4cda8385ff5e27b49360e87141d4ef11b4821cfbee3577d1e76c1355478d0f'
select COUNT(*) OVER() AS total_count,g.* from Gallery g where g.title like '%%'  order by date desc limit 25 offset 0
ALTER table GalleryFile rename to GalleryFileTemp
create table if not exists GalleryFile(
      gid INTEGER,
      hash TEXT not NULL,
      name TEXT not NULL,
      width integer,
      height integer,
      fileHash integer,
      thumb BLOB,
      PRIMARY KEY(gid,hash),
      FOREIGN KEY(gid) REFERENCES Gallery(id)  ON DELETE CASCADE
      )
insert into  GalleryFile(gid,hash,name,width,height,fileHash,thumb) select gft.gid,gft.hash,gft.name,gft.width,gft.height,gft.fileHash,gft.thumb from GalleryFileTemp gft left join Gallery g on gft.gid=g.id where g.date <1712303701035